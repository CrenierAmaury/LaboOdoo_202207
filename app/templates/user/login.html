{% extends 'layout/layout.html' %}
{% block body %}
    <form action="" method="post">
        {{form.csrf_token}}
        <div class="form-group row">
            <div class="col-md-4 mb-3">
                <label for="login">Login</label>
                <input type="text" class="form-control" name="login" value="{{form.login.data}}">
            </div>
        </div>
        <div class="form-group row">
            <div class="col-md-4 mb-3">
                <label for="password">password</label>
                <input type="password" class="form-control" name="password" value="{{form.password.data}}">
            </div>
        </div>
        <button class="btn btn-primary" type="submit">login</button>
    </form>
    {% if errors %}
        <script>
            let jserrors = {{errors | tojson}};
            let elem;
            let newElem = document.createElement('p');
            newElem.style.color = "red";
            if (jserrors.errors == "wrong password") {
                elem = document.getElementsByName('password')[0];
                elem.style.backgroundColor = "red";
                newElem.innerText = "wrong password";
                elem.insertAdjacentElement('afterend', newElem);
            } else {
                let elem = document.getElementsByName('login')[0];
                elem.style.backgroundColor = "red";
                newElem.innerText = "user does not exist";
                elem.insertAdjacentElement('afterend', newElem);
            }
        </script>
    {% endif %}
{% endblock %}